{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>⚠️ Confirmar Eliminación - NEUSI Task Manager</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            text-decoration: none;
            color: white;
            font-weight: bold;
        }
        .btn-secondary { background-color: #6c757d; }
        .btn-danger { background-color: #dc3545; }
        .alert-danger {
            background-color: #f8d7da;
            border: 1px solid #f5c2c7;
            color: #842029;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .badge {
            padding: 4px 8px;
            border-radius: 4px;
            color: white;
            font-size: 0.8em;
        }
        .badge-ui { background-color: #dc3545; }
        .badge-nui { background-color: #28a745; }
        .badge-uni { background-color: #ffc107; color: #000; }
        .badge-nuni { background-color: #6c757d; }
    </style>
</head>
<body style="padding: 20px; max-width: 800px; margin: 0 auto;">
    <h1>⚠️ Confirmar Eliminación de Tarea</h1>
    
    <div class="alert-danger">
        <h3>🗑️ ¿Estás seguro de eliminar esta tarea?</h3>
        <p><strong>Esta acción no se puede deshacer y eliminará:</strong></p>
        <ul>
            <li>La tarea completa</li>
            <li>Todas las evidencias asociadas</li>
            <li>El informe de cierre (si existe)</li>
        </ul>
    </div>

    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
        <h4>📋 {{ tarea.titulo }}</h4>
        
        <p>
            <span class="badge {% if tarea.categoria == 'UI' %}badge-ui{% elif tarea.categoria == 'NUI' %}badge-nui{% elif tarea.categoria == 'UNI' %}badge-uni{% else %}badge-nuni{% endif %}">
                {{ tarea.get_categoria_display }}
            </span>
        </p>
        
        <p><strong>Sprint:</strong> {{ tarea.sprint.inicio }} - {{ tarea.sprint.fin }}</p>
        <p><strong>Asignado a:</strong> {{ tarea.asignado_a.user.first_name }} {{ tarea.asignado_a.user.last_name }}</p>
        <p><strong>Estado:</strong> 
            {% if tarea.completada %}
                ✅ Cerrada {% if tarea.fecha_cierre %}({{ tarea.fecha_cierre|date:"d/m/Y H:i" }}){% endif %}
            {% else %}
                ⏳ Abierta
            {% endif %}
        </p>
        {% if tarea.descripcion %}
        <p><strong>Descripción:</strong> {{ tarea.descripcion }}</p>
        {% endif %}
    </div>

    <form method="post">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">🗑️ Sí, Eliminar Tarea</button>
        <a href="{% url 'backlog_lista' %}" class="btn btn-secondary">❌ Cancelar</a>
    </form>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>