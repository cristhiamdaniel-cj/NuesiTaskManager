{% extends "base.html" %}
{% block content %}

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h2>🏠 Bienvenido a NEUSI Task Manager</h2>
    
    {% if request.user.is_authenticated %}
    <div style="text-align: right;">
        <span style="margin-right: 15px;">👤 Hola, {{ request.user.first_name|default:request.user.username }}</span>
        <a href="{% url 'logout' %}" style="background:#dc3545; color:white; padding:8px 16px; text-decoration:none; border-radius:5px; font-weight:bold;">
            🚪 Cerrar Sesión
        </a>
    </div>
    {% endif %}
</div>

<p>Selecciona a dónde quieres ir:</p>

<nav style="margin-top:20px;">
    <a href="{% url 'backlog_lista' %}" style="background:#007bff; color:white; padding:15px 25px; margin-right:15px; text-decoration:none; border-radius:5px; font-weight:bold;">
        📋 Backlog
    </a>
    <a href="{% url 'backlog_matriz' %}" style="background:#28a745; color:white; padding:15px 25px; margin-right:15px; text-decoration:none; border-radius:5px; font-weight:bold;">
        📊 Matriz
    </a>
    <a href="{% url 'daily_resumen' %}" style="background:#17a2b8; color:white; padding:15px 25px; text-decoration:none; border-radius:5px; font-weight:bold;">
        📝 Daily
    </a>
</nav>

{% if request.user.is_authenticated and request.user.integrante %}
    <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
        <h3>🚀 Acceso Rápido</h3>
        <p>Accede directamente a tu daily de hoy:</p>
        <a href="{% url 'daily_personal' %}" style="background:#ffc107; color:#000; padding:10px 20px; text-decoration:none; border-radius:5px; font-weight:bold;">
            📅 Mi Daily de Hoy
        </a>
        
        {% if request.user.integrante.puede_crear_tareas %}
        <div style="margin-top: 15px; padding: 15px; background: #d4edda; border-radius: 5px; border: 1px solid #c3e6cb;">
            <h4 style="color: #155724;">✅ Permisos Administrativos</h4>
            <p style="color: #155724; margin: 5px 0;">Como <strong>{{ request.user.integrante.rol }}</strong>, tienes acceso completo:</p>
            <ul style="color: #155724; margin: 5px 0;">
                <li>👥 Ver tareas de TODOS los miembros del equipo</li>
                <li>🔍 Usar filtros para ver tareas específicas por persona</li>
                <li>➕ Crear nuevas tareas</li>
                <li>📎 Agregar evidencias a cualquier tarea</li>
                <li>📊 Acceso completo a matriz y reportes</li>
                <li>📝 Ver todos los dailies del equipo</li>
            </ul>
        </div>
        {% else %}
        <div style="margin-top: 15px; padding: 15px; background: #fff3cd; border-radius: 5px; border: 1px solid #ffeaa7;">
            <h4 style="color: #856404;">ℹ️ Vista Personal</h4>
            <p style="color: #856404; margin: 5px 0;">Como <strong>{{ request.user.integrante.rol }}</strong>, tienes acceso a:</p>
            <ul style="color: #856404; margin: 5px 0;">
                <li>👀 Ver únicamente TUS tareas asignadas</li>
                <li>📝 Registrar tu daily personal</li>
                <li>✅ Cerrar tus tareas completadas</li>
                <li>📊 Ver tus tareas en la matriz personal</li>
            </ul>
            <p style="color: #856404; margin-top: 10px; font-size: 0.9em;">
                <strong>💡 Nota:</strong> Para ver tareas de todo el equipo o crear nuevas tareas, contacta a <strong>Daniel Campos</strong> o <strong>Andrés Gómez</strong>.
            </p>
        </div>
        {% endif %}
    </div>
{% endif %}

{% endblock %}